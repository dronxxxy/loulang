const putChar = @externFun("putchar", @procFun(u8))

const putInt = fun (var int: i32) {
  if int < 0 {
    int = -int
    putChar('-')
  } else if int == 0 {
    putChar('0')
    return
  }

  const BufferSize = 16
  var buffer: @array(BufferSize, u8)
  
  var length = 0
  while int > 0 {
    @arrayAt(buffer, length) = '0' + @intCast(int % 10, u8)
    int = int / 10
    length = length + 1
  }

  while length > 0 {
    putChar(@arrayAt(buffer, length = length - 1))
  }
}

@global("main", fun () -> i32 {
  var i = -10
  
  while i <= 10 {
    putInt(i)
    putChar('\n')
    i = i + 1
  }

  return 0
})


