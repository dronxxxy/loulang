meta ExitStatus = i32

meta Options = struct {
  characterToPrint: u8,
  exitStatus: ExitStatus,
  self: @ptr(Options),
}

const superMain = fun (options: Options) -> ExitStatus {
  const putChar = @externFun("putchar", @procFun(u8))

  putChar(options.characterToPrint)
  putChar('\n')
  
  return options.exitStatus
}

@global("main", fun () -> ExitStatus {
  var options: Options
  options.characterToPrint = 'a'
  options.exitStatus = 0
  return superMain(options)
})


